# Use the official image as the base
FROM asia.gcr.io/johncollins/dlf:v0.1.4

# Set environment variables for Voila
ENV VOILA_PORT=8080
ENV VOILA_CONFIG_FILE=/etc/voila/config.yaml

# Install Voila
RUN pip install voila

# Copy configuration file
COPY config.yaml /etc/voila/

# Set working directory
WORKDIR /home/posts/deep-learning-finance

# Copy the application directory
COPY . /app

# Expose app port
EXPOSE 8080

# Run Voila server
CMD ["voila", "--port", "${VOILA_PORT}", "--config", "${VOILA_CONFIG_FILE}"]
